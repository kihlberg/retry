var retry=function(){"use strict";function a(a,b){this.data=a,this.failed=b}var b=function(a,b){return"undefined"!=typeof a?a:b},c={INFINITE:"infinite",BACKOFF_FUNCTION_EXPONENTIAL_NO_JITTER:function(a,b){return Math.pow(2,a)*b},BACKOFF_FUNCTION_EXPONENTIAL_JITTER:function(a,b){var d=c.BACKOFF_FUNCTION_EXPONENTIAL_NO_JITTER(a,b);(Math.random()+.5)/10*d;return Math.random()>.5?d+jittered:d-jittered},run:function(d,e){var f=b(e.expectedResult,!0),g=b(e.retryAfter,1e3),h=b(e.maxAttempts,c.INFINITE),i=b(e.backoff,!1),j=b(e.backoffFunction,c.BACKOFF_FUNCTION_EXPONENTIAL_JITTER),k=b(e.backoffMaxWait,Number.MAX_VALUE);return new Promise(function(b,c){var e=0,l=function(a){if(e++,a.failed||a.data!==f)if(e===h)c();else{var d=g;i&&(d=Math.min(j(e,g),k)),setTimeout(m,d)}else b(a.data)},m=function(){var b=d.call();b instanceof Promise?b.then(function(b){l(new a(b,!1))},function(b){l(new a(b,!0))}):l(new a(b,!1))};m()})}};return c}();